<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: Setup::Installer</title>

  
    <link rel="SHORTCUT ICON" href="../images/class.png">
  

  <link type="text/css" media="screen" rel="stylesheet" href="../rdoc.css" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body class="class">

  <div class="head">
    <h1>
      
        <img src="../images/class.png" align="absmiddle">&nbsp;
      
      <a href="../index.html">Setup</a>&nbsp;
      <a href="/">Setup::Installer</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li class="file"><a href="../lib/setup/install_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/setup/install.rb">lib/setup/install.rb</a></li>
          
            <li class="file"><a href="../lib/setup/install2_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/setup/install2.rb">lib/setup/install2.rb</a></li>
          
          </ul>
        </div>
      </div>

      <!-- What about Git info, or Hg info? This seems almost silly, albeit kind of cool. -->

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        <ul>
          
          <li class="class">Object</li>
          
        </ul>
      </div>
      

      <!-- Namespace Contents -->
      
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li class="class"><a href="Installer/Shebang.html">Setup::Installer::Shebang</a></li>
          
        </ul>
      </div>
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li class="method"><a href="#M000000">::new</a></li>
          
          <li class="method"><a href="#M000138">#ask</a></li>
          
          <li class="method"><a href="#M000102">#binread</a></li>
          
          <li class="method"><a href="#M000079">#clean_dir_bin</a></li>
          
          <li class="method"><a href="#M000081">#clean_dir_data</a></li>
          
          <li class="method"><a href="#M000084">#clean_dir_doc</a></li>
          
          <li class="method"><a href="#M000082">#clean_dir_etc</a></li>
          
          <li class="method"><a href="#M000085">#clean_dir_ext</a></li>
          
          <li class="method"><a href="#M000080">#clean_dir_lib</a></li>
          
          <li class="method"><a href="#M000083">#clean_dir_man</a></li>
          
          <li class="method"><a href="#M000132">#command</a></li>
          
          <li class="method"><a href="#M000010">#compiles?</a></li>
          
          <li class="method"><a href="#M000019">#config_dir_bin</a></li>
          
          <li class="method"><a href="#M000022">#config_dir_data</a></li>
          
          <li class="method"><a href="#M000025">#config_dir_doc</a></li>
          
          <li class="method"><a href="#M000023">#config_dir_etc</a></li>
          
          <li class="method"><a href="#M000021">#config_dir_ext</a></li>
          
          <li class="method"><a href="#M000020">#config_dir_lib</a></li>
          
          <li class="method"><a href="#M000024">#config_dir_man</a></li>
          
          <li class="method"><a href="#M000146">#curr_objdir</a></li>
          
          <li class="method"><a href="#M000145">#curr_srcdir</a></li>
          
          <li class="method"><a href="#M000163">#diff?</a></li>
          
          <li class="method"><a href="#M000131">#diff?</a></li>
          
          <li class="method"><a href="#M000137">#directories_of</a></li>
          
          <li class="method"><a href="#M000087">#distclean_dir_bin</a></li>
          
          <li class="method"><a href="#M000090">#distclean_dir_data</a></li>
          
          <li class="method"><a href="#M000093">#distclean_dir_doc</a></li>
          
          <li class="method"><a href="#M000091">#distclean_dir_etc</a></li>
          
          <li class="method"><a href="#M000089">#distclean_dir_ext</a></li>
          
          <li class="method"><a href="#M000088">#distclean_dir_lib</a></li>
          
          <li class="method"><a href="#M000092">#distclean_dir_man</a></li>
          
          <li class="method"><a href="#M000098">#dive_into</a></li>
          
          <li class="method"><a href="#M000063">#dllext</a></li>
          
          <li class="method"><a href="#M000165">#dllext</a></li>
          
          <li class="method"><a href="#M000017">#exec_all</a></li>
          
          <li class="method"><a href="#M000078">#exec_clean</a></li>
          
          <li class="method"><a href="#M000018">#exec_config</a></li>
          
          <li class="method"><a href="#M000086">#exec_distclean</a></li>
          
          <li class="method"><a href="#M000045">#exec_doc</a></li>
          
          <li class="method"><a href="#M000048">#exec_install</a></li>
          
          <li class="method"><a href="#M000046">#exec_rdoc</a></li>
          
          <li class="method"><a href="#M000047">#exec_ri</a></li>
          
          <li class="method"><a href="#M000028">#exec_setup</a></li>
          
          <li class="method"><a href="#M000027">#exec_show</a></li>
          
          <li class="method"><a href="#M000094">#exec_task_traverse</a></li>
          
          <li class="method"><a href="#M000044">#exec_test</a></li>
          
          <li class="method"><a href="#M000075">#exec_uninstall</a></li>
          
          <li class="method"><a href="#M000068">#existfiles</a></li>
          
          <li class="method"><a href="#M000026">#extconf</a></li>
          
          <li class="method"><a href="#M000135">#extdir?</a></li>
          
          <li class="method"><a href="#M000009">#extensions</a></li>
          
          <li class="method"><a href="#M000157">#files</a></li>
          
          <li class="method"><a href="#M000136">#files_of</a></li>
          
          <li class="method"><a href="#M000124">#force_remove_file</a></li>
          
          <li class="method"><a href="#M000141">#get_config</a></li>
          
          <li class="method"><a href="#M000072">#glob_reject</a></li>
          
          <li class="method"><a href="#M000071">#glob_select</a></li>
          
          <li class="method"><a href="#M000074">#globs2re</a></li>
          
          <li class="method"><a href="#M000069">#hookfiles</a></li>
          
          <li class="method"><a href="#M000001">#inspect</a></li>
          
          <li class="method"><a href="#M000139">#install</a></li>
          
          <li class="method"><a href="#M000127">#install</a></li>
          
          <li class="method"><a href="#M000160">#install</a></li>
          
          <li class="method"><a href="#M000140">#install_bin</a></li>
          
          <li class="method"><a href="#M000149">#install_data</a></li>
          
          <li class="method"><a href="#M000049">#install_dir_bin</a></li>
          
          <li class="method"><a href="#M000052">#install_dir_data</a></li>
          
          <li class="method"><a href="#M000056">#install_dir_doc</a></li>
          
          <li class="method"><a href="#M000053">#install_dir_etc</a></li>
          
          <li class="method"><a href="#M000051">#install_dir_ext</a></li>
          
          <li class="method"><a href="#M000050">#install_dir_lib</a></li>
          
          <li class="method"><a href="#M000054">#install_dir_man</a></li>
          
          <li class="method"><a href="#M000155">#install_doc</a></li>
          
          <li class="method"><a href="#M000150">#install_etc</a></li>
          
          <li class="method"><a href="#M000142">#install_ext</a></li>
          
          <li class="method"><a href="#M000059">#install_files</a></li>
          
          <li class="method"><a href="#M000159">#install_files</a></li>
          
          <li class="method"><a href="#M000144">#install_lib</a></li>
          
          <li class="method"><a href="#M000152">#install_man</a></li>
          
          <li class="method"><a href="#M000003">#installation!</a></li>
          
          <li class="method"><a href="#M000002">#installation?</a></li>
          
          <li class="method"><a href="#M000061">#libfiles</a></li>
          
          <li class="method"><a href="#M000134">#make</a></li>
          
          <li class="method"><a href="#M000065">#mapdir</a></li>
          
          <li class="method"><a href="#M000161">#mkdir_p</a></li>
          
          <li class="method"><a href="#M000103">#mkdir_p</a></li>
          
          <li class="method"><a href="#M000121">#move_file</a></li>
          
          <li class="method"><a href="#M000037">#new_shebang</a></li>
          
          <li class="method"><a href="#M000004">#no_harm?</a></li>
          
          <li class="method"><a href="#M000011">#noop</a></li>
          
          <li class="method"><a href="#M000013">#objdir_root</a></li>
          
          <li class="method"><a href="#M000039">#open_atomic_writer</a></li>
          
          <li class="method"><a href="#M000006">#quiet?</a></li>
          
          <li class="method"><a href="#M000130">#record_installation</a></li>
          
          <li class="method"><a href="#M000162">#record_installation</a></li>
          
          <li class="method"><a href="#M000014">#relpath</a></li>
          
          <li class="method"><a href="#M000126">#remove_file</a></li>
          
          <li class="method"><a href="#M000116">#remove_tree</a></li>
          
          <li class="method"><a href="#M000118">#remove_tree0</a></li>
          
          <li class="method"><a href="#M000008">#report_header</a></li>
          
          <li class="method"><a href="#M000110">#rm_f</a></li>
          
          <li class="method"><a href="#M000111">#rm_rf</a></li>
          
          <li class="method"><a href="#M000113">#rmdir</a></li>
          
          <li class="method"><a href="#M000133">#ruby</a></li>
          
          <li class="method"><a href="#M000164">#rubyextentions</a></li>
          
          <li class="method"><a href="#M000062">#rubyextentions</a></li>
          
          <li class="method"><a href="#M000099">#run_hook</a></li>
          
          <li class="method"><a href="#M000143">#set_config</a></li>
          
          <li class="method"><a href="#M000029">#setup_dir_bin</a></li>
          
          <li class="method"><a href="#M000032">#setup_dir_data</a></li>
          
          <li class="method"><a href="#M000035">#setup_dir_doc</a></li>
          
          <li class="method"><a href="#M000033">#setup_dir_etc</a></li>
          
          <li class="method"><a href="#M000031">#setup_dir_ext</a></li>
          
          <li class="method"><a href="#M000030">#setup_dir_lib</a></li>
          
          <li class="method"><a href="#M000034">#setup_dir_man</a></li>
          
          <li class="method"><a href="#M000012">#srcdir_root</a></li>
          
          <li class="method"><a href="#M000158">#srcdirectories</a></li>
          
          <li class="method"><a href="#M000151">#srcdirectory?</a></li>
          
          <li class="method"><a href="#M000154">#srcentries</a></li>
          
          <li class="method"><a href="#M000148">#srcexist?</a></li>
          
          <li class="method"><a href="#M000147">#srcfile</a></li>
          
          <li class="method"><a href="#M000153">#srcfile?</a></li>
          
          <li class="method"><a href="#M000156">#srcfiles</a></li>
          
          <li class="method"><a href="#M000064">#targetfiles</a></li>
          
          <li class="method"><a href="#M000095">#traverse</a></li>
          
          <li class="method"><a href="#M000036">#update_shebang_line</a></li>
          
          <li class="method"><a href="#M000005">#verbose?</a></li>
          
          <li class="method"><a href="#M000007">#verbose_off</a></li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../COPYING.html">COPYING</a></li>
        
          <li class="file"><a href="../HISTORY.html">HISTORY</a></li>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <!-- classpage.html : classes -->
        <ul class="link-list">
        
          <li class="module"><a href="../Setup.html">Setup</a></li>
        
          <li class="class"><a href="../Setup/Command.html">Setup::Command</a></li>
        
          <li class="class"><a href="../Setup/ConfigTable.html">Setup::ConfigTable</a></li>
        
          <li class="class"><a href="../Setup/ConfigTable/MetaConfigEnvironment.html">Setup::ConfigTable::MetaConfigEnvironment</a></li>
        
          <li class="class"><a href="../Setup/Error.html">Setup::Error</a></li>
        
          <li class="class"><a href="../Setup/Installer.html">Setup::Installer</a></li>
        
          <li class="class"><a href="../Setup/Installer/Shebang.html">Setup::Installer::Shebang</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>

    <div id="validator-badges">
      Generated with <a href="http://github.com/proutils/rdazzle">Razzle Dazzle Redfish</a><br/><br/>
      <a href="http://validator.w3.org/check/referer">[Validate]</a>
    </div>
  </div>

  <div id="documentation">

    <div id="description">
      
        <h1>Installer</h1>
      

      <p>
<a href="Installer.html">Installer</a> class handles the actual install
procedure, as well as the other tasks, such as testing.
</p>
<p>
THIS IS A WORK IN PROGRESS REWRITE.
</p>
<p>
This version will no support per-directory hooks.
</p>

    </div>

    <!-- Constants -->
    
    <div id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt><a name="MANIFEST">MANIFEST</a></dt>
        
        <dd class="description missing-docs">(Not documented)</dd>
        
      
        <dt><a name="FILETYPES">FILETYPES</a></dt>
        
        <dd class="description missing-docs">(Not documented)</dd>
        
      
        <dt><a name="JUNK_FILES">JUNK_FILES</a></dt>
        
        <dd class="description"><p>
picked up many entries from cvs-1.11.1/src/ignore.c
</p></dd>
        
      
        <dt><a name="GLOB2REGEX">GLOB2REGEX</a></dt>
        
        <dd class="description missing-docs">(Not documented)</dd>
        
      
        <dt><a name="DIR_REJECT">DIR_REJECT</a></dt>
        
        <dd class="description missing-docs">(Not documented)</dd>
        
      
        <dt><a name="MANIFEST">MANIFEST</a></dt>
        
        <dd class="description missing-docs">(Not documented)</dd>
        
      
        <dt><a name="FILETYPES">FILETYPES</a></dt>
        
        <dd class="description missing-docs">(Not documented)</dd>
        
      
      </dl>
    </div>
    

    <!-- Attributes -->
    
    <div id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="config-attribute-method" class="method-detail">
        <a name="config"></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">config</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>
Configuration
</p>
        
        </div>
      </div>
      
      <div id="no-harm-attribute-method" class="method-detail">
        <a name="no_harm"></a>
        
        <a name="no_harm="></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">no_harm</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        <p class="missing-docs">(Not documented)</p>
        
        </div>
      </div>
      
      <div id="verbose-attribute-method" class="method-detail">
        <a name="verbose"></a>
        
        <a name="verbose="></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">verbose</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        <p class="missing-docs">(Not documented)</p>
        
        </div>
      </div>
      
      <div id="quiet-attribute-method" class="method-detail">
        <a name="quiet"></a>
        
        <a name="quiet="></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">quiet</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        <p class="missing-docs">(Not documented)</p>
        
        </div>
      </div>
      
      <div id="install-prefix-attribute-method" class="method-detail">
        <a name="install_prefix"></a>
        
        <a name="install_prefix="></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">install_prefix</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p class="missing-docs">(Not documented)</p>
        
        </div>
      </div>
      
      <div id="install-no-test-attribute-method" class="method-detail">
        <a name="install_no_test"></a>
        
        <a name="install_no_test="></a>
        
        <div class="method-heading attribute-method-heading">
          <span class="method-name">install_no_test</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p class="missing-docs">(Not documented)</p>
        
        </div>
      </div>
      
    </div>
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="new-method" class="method-detail ">
        <a name="M000000"></a>

        <div class="method-heading">
        
          <span class="method-name">new</span><span
            class="method-args">(config=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
New <a href="Installer.html">Installer</a>.
</p>
          

          
          <div class="method-source-code"
            id="new-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 67</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">config</span>=<span class="ruby-keyword kw">nil</span>) <span class="ruby-comment cmt">#:yield:</span>
      <span class="ruby-identifier">srcroot</span> = <span class="ruby-value str">'.'</span>
      <span class="ruby-identifier">objroot</span> = <span class="ruby-value str">'.'</span>

      <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">config</span> <span class="ruby-operator">||</span> <span class="ruby-constant">ConfigTable</span>.<span class="ruby-identifier">new</span>

      <span class="ruby-ivar">@srcdir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">srcroot</span>)
      <span class="ruby-ivar">@objdir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">objroot</span>)
      <span class="ruby-ivar">@currdir</span> = <span class="ruby-value str">'.'</span>

      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">quiet</span>   = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'quiet'</span>]   <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'quiet'</span>]
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'verbose'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'verbose'</span>]
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">no_harm</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'nowrite'</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'nowrite'</span>]

      <span class="ruby-keyword kw">yield</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  
    <div id="public-instance-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="ask-method" class="method-detail ">
        <a name="M000138"></a>

        <div class="method-heading">
        
          <span class="method-name">ask</span><span
            class="method-args">(question, answers=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Ask a question of the user.
</p>
          

          
          <div class="method-source-code"
            id="ask-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 958</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ask</span>(<span class="ruby-identifier">question</span>, <span class="ruby-identifier">answers</span>=<span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">$stdout</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{question}&quot;</span>
      <span class="ruby-identifier">$stdout</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; [#{answers}] &quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">answers</span>
      <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">inp</span> = <span class="ruby-identifier">$stdin</span>.<span class="ruby-identifier">gets</span> ; <span class="ruby-identifier">sleep</span> <span class="ruby-value">1</span> ; <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">inp</span>.<span class="ruby-identifier">strip</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="binread-method" class="method-detail ">
        <a name="M000102"></a>

        <div class="method-heading">
        
          <span class="method-name">binread</span><span
            class="method-args">(fname)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
File Operations
</p>
<p>
This module requires: <a href="Installer.html#M000005">verbose?</a>, <a
href="Installer.html#M000004">no_harm?</a>
</p>
          

          
          <div class="method-source-code"
            id="binread-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 790</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">binread</span>(<span class="ruby-identifier">fname</span>)
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">fname</span>, <span class="ruby-value str">'rb'</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span>
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="clean-dir-bin-method" class="method-detail method-alias">
        <a name="M000079"></a>

        <div class="method-heading">
        
          <span class="method-name">clean_dir_bin</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="clean-dir-data-method" class="method-detail method-alias">
        <a name="M000081"></a>

        <div class="method-heading">
        
          <span class="method-name">clean_dir_data</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="clean-dir-doc-method" class="method-detail method-alias">
        <a name="M000084"></a>

        <div class="method-heading">
        
          <span class="method-name">clean_dir_doc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="clean-dir-etc-method" class="method-detail method-alias">
        <a name="M000082"></a>

        <div class="method-heading">
        
          <span class="method-name">clean_dir_etc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="clean-dir-ext-method" class="method-detail ">
        <a name="M000085"></a>

        <div class="method-heading">
        
          <span class="method-name">clean_dir_ext</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="clean-dir-ext-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 683</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clean_dir_ext</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">extdir?</span>(<span class="ruby-identifier">curr_srcdir</span>())
      <span class="ruby-identifier">make</span> <span class="ruby-value str">'clean'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-value str">'Makefile'</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="clean-dir-lib-method" class="method-detail method-alias">
        <a name="M000080"></a>

        <div class="method-heading">
        
          <span class="method-name">clean_dir_lib</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="clean-dir-man-method" class="method-detail method-alias">
        <a name="M000083"></a>

        <div class="method-heading">
        
          <span class="method-name">clean_dir_man</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="command-method" class="method-detail ">
        <a name="M000132"></a>

        <div class="method-heading">
        
          <span class="method-name">command</span><span
            class="method-args">(*args)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="command-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 925</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">command</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-identifier">system</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">RuntimeError</span>,
          <span class="ruby-node">&quot;system(#{args.map{|a| a.inspect }.join(' ')}) failed&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="compiles--method" class="method-detail ">
        <a name="M000010"></a>

        <div class="method-heading">
        
          <span class="method-name">compiles?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="compiles--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 124</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compiles?</span>
      <span class="ruby-operator">!</span><span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="config-dir-bin-method" class="method-detail method-alias">
        <a name="M000019"></a>

        <div class="method-heading">
        
          <span class="method-name">config_dir_bin</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="config-dir-data-method" class="method-detail method-alias">
        <a name="M000022"></a>

        <div class="method-heading">
        
          <span class="method-name">config_dir_data</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="config-dir-doc-method" class="method-detail method-alias">
        <a name="M000025"></a>

        <div class="method-heading">
        
          <span class="method-name">config_dir_doc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="config-dir-etc-method" class="method-detail method-alias">
        <a name="M000023"></a>

        <div class="method-heading">
        
          <span class="method-name">config_dir_etc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="config-dir-ext-method" class="method-detail ">
        <a name="M000021"></a>

        <div class="method-heading">
        
          <span class="method-name">config_dir_ext</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="config-dir-ext-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 175</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">config_dir_ext</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-identifier">extconf</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">extdir?</span>(<span class="ruby-identifier">curr_srcdir</span>())
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="config-dir-lib-method" class="method-detail method-alias">
        <a name="M000020"></a>

        <div class="method-heading">
        
          <span class="method-name">config_dir_lib</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="config-dir-man-method" class="method-detail method-alias">
        <a name="M000024"></a>

        <div class="method-heading">
        
          <span class="method-name">config_dir_man</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="curr-objdir-method" class="method-detail ">
        <a name="M000146"></a>

        <div class="method-heading">
        
          <span class="method-name">curr_objdir</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="curr-objdir-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 992</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">curr_objdir</span>
      <span class="ruby-node">&quot;#{objdir_root()}/#{relpath()}&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="curr-srcdir-method" class="method-detail ">
        <a name="M000145"></a>

        <div class="method-heading">
        
          <span class="method-name">curr_srcdir</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="curr-srcdir-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 988</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">curr_srcdir</span>
      <span class="ruby-node">&quot;#{srcdir_root()}/#{relpath()}&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="diff--method" class="method-detail ">
        <a name="M000131"></a>

        <div class="method-heading">
        
          <span class="method-name">diff?</span><span
            class="method-args">(new_content, path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="diff--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 920</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">diff?</span>(<span class="ruby-identifier">new_content</span>, <span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-identifier">new_content</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">binread</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="directories-of-method" class="method-detail ">
        <a name="M000137"></a>

        <div class="method-heading">
        
          <span class="method-name">directories_of</span><span
            class="method-args">(dir)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="directories-of-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 951</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">directories_of</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">dir</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-node">&quot;#{dir}/#{ent}&quot;</span>) } <span class="ruby-operator">-</span> <span class="ruby-constant">DIR_REJECT</span>
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="distclean-dir-bin-method" class="method-detail method-alias">
        <a name="M000087"></a>

        <div class="method-heading">
        
          <span class="method-name">distclean_dir_bin</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="distclean-dir-data-method" class="method-detail method-alias">
        <a name="M000090"></a>

        <div class="method-heading">
        
          <span class="method-name">distclean_dir_data</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="distclean-dir-doc-method" class="method-detail ">
        <a name="M000093"></a>

        <div class="method-heading">
        
          <span class="method-name">distclean_dir_doc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="distclean-dir-doc-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 710</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">distclean_dir_doc</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-comment cmt">#rm_rf('rdoc') if File.directory?('rdoc')  # RDOC HERE</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="distclean-dir-etc-method" class="method-detail method-alias">
        <a name="M000091"></a>

        <div class="method-heading">
        
          <span class="method-name">distclean_dir_etc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="distclean-dir-ext-method" class="method-detail ">
        <a name="M000089"></a>

        <div class="method-heading">
        
          <span class="method-name">distclean_dir_ext</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="distclean-dir-ext-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 701</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">distclean_dir_ext</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">extdir?</span>(<span class="ruby-identifier">curr_srcdir</span>())
      <span class="ruby-identifier">make</span> <span class="ruby-value str">'distclean'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-value str">'Makefile'</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="distclean-dir-lib-method" class="method-detail method-alias">
        <a name="M000088"></a>

        <div class="method-heading">
        
          <span class="method-name">distclean_dir_lib</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="distclean-dir-man-method" class="method-detail method-alias">
        <a name="M000092"></a>

        <div class="method-heading">
        
          <span class="method-name">distclean_dir_man</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="dive-into-method" class="method-detail ">
        <a name="M000098"></a>

        <div class="method-heading">
        
          <span class="method-name">dive_into</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="dive-into-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 757</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dive_into</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-node">&quot;#{@srcdir}/#{rel}&quot;</span>)

      <span class="ruby-identifier">dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-identifier">prevdir</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">dir</span>
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">'---&gt; '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rel</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-ivar">@currdir</span> = <span class="ruby-identifier">rel</span>
      <span class="ruby-keyword kw">yield</span>
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">prevdir</span>
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">'&lt;--- '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rel</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-ivar">@currdir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">rel</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="dllext-method" class="method-detail ">
        <a name="M000063"></a>

        <div class="method-heading">
        
          <span class="method-name">dllext</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="dllext-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 562</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dllext</span>
      <span class="ruby-constant">ConfigTable</span><span class="ruby-operator">::</span><span class="ruby-constant">RBCONFIG</span>[<span class="ruby-value str">'DLEXT'</span>]
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-all-method" class="method-detail ">
        <a name="M000017"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_all</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Task all
</p>
          

          
          <div class="method-source-code"
            id="exec-all-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 151</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_all</span>
      <span class="ruby-identifier">exec_config</span>
      <span class="ruby-identifier">exec_setup</span>
      <span class="ruby-identifier">exec_test</span>
      <span class="ruby-identifier">exec_doc</span>
      <span class="ruby-identifier">exec_install</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-clean-method" class="method-detail ">
        <a name="M000078"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_clean</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK clean
</p>
          

          
          <div class="method-source-code"
            id="exec-clean-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 670</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_clean</span>
      <span class="ruby-identifier">exec_task_traverse</span> <span class="ruby-value str">'clean'</span>
      <span class="ruby-identifier">rm_f</span> <span class="ruby-constant">ConfigTable</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIGFILE</span>
      <span class="ruby-comment cmt">#rm_f MANIFEST  # only on clobber!</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-config-method" class="method-detail ">
        <a name="M000018"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_config</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK config
</p>
          

          
          <div class="method-source-code"
            id="exec-config-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 163</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_config</span>
      <span class="ruby-identifier">report_header</span>(<span class="ruby-value str">'config'</span>)
      <span class="ruby-identifier">config</span>.<span class="ruby-identifier">env_config</span>
      <span class="ruby-identifier">config</span>.<span class="ruby-identifier">save_config</span>
      <span class="ruby-identifier">config</span>.<span class="ruby-identifier">show</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-identifier">puts</span>(<span class="ruby-value str">&quot;Configuration saved.&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">quiet?</span>
      <span class="ruby-identifier">exec_task_traverse</span> <span class="ruby-value str">'config'</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-distclean-method" class="method-detail ">
        <a name="M000086"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_distclean</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK distclean
</p>
          

          
          <div class="method-source-code"
            id="exec-distclean-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 692</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_distclean</span>
      <span class="ruby-identifier">exec_task_traverse</span> <span class="ruby-value str">'distclean'</span>
      <span class="ruby-identifier">rm_f</span> <span class="ruby-constant">ConfigTable</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIGFILE</span>
      <span class="ruby-identifier">rm_f</span> <span class="ruby-constant">MANIFEST</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-doc-method" class="method-detail ">
        <a name="M000045"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_doc</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK doc
</p>
          

          
          <div class="method-source-code"
            id="exec-doc-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 367</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_doc</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">withoutdoc?</span>
      <span class="ruby-identifier">report_header</span>(<span class="ruby-value str">'doc'</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file</span> = <span class="ruby-constant">DOCTOR</span>
        <span class="ruby-identifier">ruby</span>(<span class="ruby-identifier">file</span>)
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">exec_rdoc</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">exec_ri</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-install-method" class="method-detail ">
        <a name="M000048"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_install</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK install
</p>
          

          
          <div class="method-source-code"
            id="exec-install-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 499</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_install</span>
      <span class="ruby-identifier">report_header</span>(<span class="ruby-value str">'install'</span>)
      <span class="ruby-identifier">installation!</span>  <span class="ruby-comment cmt"># we are installing</span>
      <span class="ruby-comment cmt">#rm_f MANIFEST # we'll append rather then delete!</span>
      <span class="ruby-identifier">exec_task_traverse</span> <span class="ruby-value str">'install'</span>
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Done.\n\n&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">quiet?</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-rdoc-method" class="method-detail ">
        <a name="M000046"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_rdoc</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Generate rdocs.
</p>
<p>
meta/package or .meta/package
</p>
          

          
          <div class="method-source-code"
            id="exec-rdoc-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 382</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_rdoc</span>
      <span class="ruby-identifier">main</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-value str">&quot;README{,.*}&quot;</span>, <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">FNM_CASEFOLD</span>).<span class="ruby-identifier">first</span>

      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-value str">'.document'</span>)
        <span class="ruby-identifier">files</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'.document'</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
        <span class="ruby-identifier">files</span>.<span class="ruby-identifier">reject!</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">l</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*[#]/</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">l</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\S/</span> }
        <span class="ruby-identifier">files</span>.<span class="ruby-identifier">collect!</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">strip</span> }
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">files</span> = []
        <span class="ruby-identifier">files</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">main</span>  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">main</span>
        <span class="ruby-identifier">files</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'lib'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-value str">'lib'</span>)
        <span class="ruby-identifier">files</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'ext'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-value str">'ext'</span>)
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-identifier">checkfiles</span> = (<span class="ruby-identifier">files</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>[<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">f</span>,<span class="ruby-value str">'*'</span>,<span class="ruby-value str">'**'</span>)] }).<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">uptodate?</span>(<span class="ruby-value str">'doc/rdoc'</span>, <span class="ruby-identifier">checkfiles</span>)
        <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;RDocs look current.&quot;</span>
        <span class="ruby-keyword kw">return</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-identifier">output</span>    = <span class="ruby-value str">'doc/rdoc'</span>
      <span class="ruby-identifier">title</span>     = (<span class="ruby-constant">PACKAGE</span>.<span class="ruby-identifier">capitalize</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; API&quot;</span>).<span class="ruby-identifier">strip</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">PACKAGE</span>
      <span class="ruby-identifier">template</span>  = <span class="ruby-identifier">config</span>.<span class="ruby-identifier">doctemplate</span> <span class="ruby-operator">||</span> <span class="ruby-value str">'html'</span>

      <span class="ruby-identifier">opt</span> = []
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;-U&quot;</span>
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;-q&quot;</span> <span class="ruby-comment cmt">#if quiet?</span>
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;--op=#{output}&quot;</span>
      <span class="ruby-comment cmt">#opt &lt;&lt; &quot;--template=#{template}&quot;</span>
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;--title=#{title}&quot;</span>
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;--main=#{main}&quot;</span>     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">main</span>
      <span class="ruby-comment cmt">#opt &lt;&lt; &quot;--debug&quot;</span>
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">files</span>

      <span class="ruby-identifier">opt</span> = <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">flatten</span>

      <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;rdoc &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)

      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">cmd</span> 
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-keyword kw">begin</span>
          <span class="ruby-identifier">system</span>(<span class="ruby-identifier">cmd</span>)
          <span class="ruby-comment cmt">#require 'rdoc/rdoc'</span>
          <span class="ruby-comment cmt">#::RDoc::RDoc.new.document(opt)</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Ok rdoc.&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">quiet?</span>
        <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Fail rdoc.&quot;</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Command was: '#{cmd}'&quot;</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Proceeding with install anyway.&quot;</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-ri-method" class="method-detail ">
        <a name="M000047"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_ri</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Generate ri documentation.
</p>
          

          
          <div class="method-source-code"
            id="exec-ri-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 438</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_ri</span>
      <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">installdirs</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'std'</span>
        <span class="ruby-identifier">output</span> = <span class="ruby-value str">&quot;--ri-system&quot;</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'site'</span>
        <span class="ruby-identifier">output</span> = <span class="ruby-value str">&quot;--ri-site&quot;</span>
      <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'home'</span>
        <span class="ruby-identifier">output</span> = <span class="ruby-value str">&quot;--ri&quot;</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">abort</span> <span class="ruby-node">&quot;bad config: sould not be possible -- installdirs = #{config.installdirs}&quot;</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-value str">'.document'</span>)
        <span class="ruby-identifier">files</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'.document'</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
        <span class="ruby-identifier">files</span>.<span class="ruby-identifier">reject!</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">l</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\s*[#]/</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">l</span> <span class="ruby-operator">!~</span> <span class="ruby-regexp re">/\S/</span> }
        <span class="ruby-identifier">files</span>.<span class="ruby-identifier">collect!</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">strip</span> }
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">files</span> = []
        <span class="ruby-identifier">files</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'lib'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-value str">'lib'</span>)
        <span class="ruby-identifier">files</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'ext'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-value str">'ext'</span>)
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-identifier">opt</span> = []
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;-U&quot;</span>
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;-q&quot;</span> <span class="ruby-comment cmt">#if quiet?</span>
      <span class="ruby-comment cmt">#opt &lt;&lt; &quot;-D&quot; #if $DEBUG</span>
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">output</span>
      <span class="ruby-identifier">opt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">files</span>

      <span class="ruby-identifier">opt</span> = <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">flatten</span>

      <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;rdoc &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">opt</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)

      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">cmd</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-comment cmt"># Generate in system location specified</span>
        <span class="ruby-keyword kw">begin</span>
          <span class="ruby-identifier">system</span>(<span class="ruby-identifier">cmd</span>)
          <span class="ruby-comment cmt">#require 'rdoc/rdoc'</span>
          <span class="ruby-comment cmt">#::RDoc::RDoc.new.document(opt)</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Ok ri.&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">quiet?</span>
        <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Fail ri.&quot;</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Command was: '#{cmd}'&quot;</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Proceeding with install anyway.&quot;</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-comment cmt"># Now in local directory</span>
        <span class="ruby-comment cmt">#opt = []</span>
        <span class="ruby-comment cmt">#opt &lt;&lt; &quot;-U&quot;</span>
        <span class="ruby-comment cmt">#opt &lt;&lt; &quot;--ri --op 'doc/ri'&quot;</span>
        <span class="ruby-comment cmt">#opt &lt;&lt; files</span>
        <span class="ruby-comment cmt">#opt = opt.flatten</span>
        <span class="ruby-comment cmt">#::RDoc::RDoc.new.document(opt)</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-setup-method" class="method-detail ">
        <a name="M000028"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_setup</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK setup
</p>
<p>
FIXME: Update shebang on install rather than before.
</p>
          

          
          <div class="method-source-code"
            id="exec-setup-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 200</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_setup</span>
      <span class="ruby-identifier">report_header</span>(<span class="ruby-value str">'setup'</span>)
      <span class="ruby-identifier">exec_task_traverse</span> <span class="ruby-value str">'setup'</span>
      <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Ok.&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-show-method" class="method-detail ">
        <a name="M000027"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_show</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK show
</p>
          

          
          <div class="method-source-code"
            id="exec-show-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 192</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_show</span>
      <span class="ruby-identifier">config</span>.<span class="ruby-identifier">show</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-task-traverse-method" class="method-detail ">
        <a name="M000094"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_task_traverse</span><span
            class="method-args">(task)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Traversing
</p>
          

          
          <div class="method-source-code"
            id="exec-task-traverse-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 718</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_task_traverse</span>(<span class="ruby-identifier">task</span>)
      <span class="ruby-identifier">run_hook</span> <span class="ruby-node">&quot;pre-#{task}&quot;</span>
      <span class="ruby-constant">FILETYPES</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">type</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'ext'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">withoutext?</span> <span class="ruby-comment cmt">#== 'yes'</span>
          <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">'skipping ext/* by user option'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
          <span class="ruby-keyword kw">next</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-comment cmt"># TODO: I think setup.rb would have to rewritten to handle this.</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'lib'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">LOADPATH</span>
          <span class="ruby-constant">LOADPATH</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">lp</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">dirs</span> = <span class="ruby-constant">Dir</span>[<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">lp</span>,<span class="ruby-value str">'*/'</span>)]
            <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
              <span class="ruby-identifier">traverse</span> <span class="ruby-identifier">task</span>, <span class="ruby-identifier">d</span>.<span class="ruby-identifier">chomp</span>(<span class="ruby-value str">'/'</span>), <span class="ruby-node">&quot;#{task}_dir_#{type}&quot;</span>, <span class="ruby-node">&quot;#{lp}/&quot;</span>
            <span class="ruby-keyword kw">end</span>
          <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">traverse</span> <span class="ruby-identifier">task</span>, <span class="ruby-identifier">type</span>, <span class="ruby-node">&quot;#{task}_dir_#{type}&quot;</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">run_hook</span> <span class="ruby-node">&quot;post-#{task}&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-test-method" class="method-detail ">
        <a name="M000044"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_test</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK test
</p>
<p>
Complexities arise in trying to figure out what test framework is used, and
how to run tests. To simplify the process, this simply looks for a script
in meta/setup called testrc.rb, or just test.rb.
</p>
          

          
          <div class="method-source-code"
            id="exec-test-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 306</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_test</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">install_no_test</span>
      <span class="ruby-identifier">file</span> = <span class="ruby-constant">TESTER</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file</span>
        <span class="ruby-identifier">report_header</span>(<span class="ruby-value str">'test'</span>)
        <span class="ruby-identifier">ruby</span>(<span class="ruby-identifier">file</span>)
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-comment cmt">#puts &quot;Ok.&quot; unless quiet?</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="exec-uninstall-method" class="method-detail ">
        <a name="M000075"></a>

        <div class="method-heading">
        
          <span class="method-name">exec_uninstall</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TASK uninstall
</p>
          

          
          <div class="method-source-code"
            id="exec-uninstall-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 625</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exec_uninstall</span>
      <span class="ruby-identifier">paths</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">MANIFEST</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
      <span class="ruby-identifier">dirs</span>, <span class="ruby-identifier">files</span> = <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">partition</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">f</span>) }

      <span class="ruby-identifier">remove</span> = []
      <span class="ruby-identifier">files</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^\#/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">file</span>  <span class="ruby-comment cmt"># skip comments</span>
        <span class="ruby-identifier">remove</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">file</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>)
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">no_harm?</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">remove</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;rm #{f}&quot;</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
        <span class="ruby-identifier">ans</span> = <span class="ruby-identifier">ask</span>(<span class="ruby-value str">&quot;Continue?&quot;</span>, <span class="ruby-value str">&quot;yN&quot;</span>)
        <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">ans</span>
        <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'y'</span>, <span class="ruby-value str">'Y'</span>, <span class="ruby-value str">'yes'</span>
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-keyword kw">return</span> <span class="ruby-comment cmt"># abort?</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-identifier">remove</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">rm_f</span>(<span class="ruby-identifier">file</span>)
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
        <span class="ruby-comment cmt"># okay this is over kill, but playing it safe...</span>
        <span class="ruby-identifier">empty</span> = <span class="ruby-constant">Dir</span>[<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-value str">'*'</span>)].<span class="ruby-identifier">empty?</span>
        <span class="ruby-keyword kw">begin</span>
          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>
            <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;rmdir #{dir}&quot;</span>
          <span class="ruby-keyword kw">else</span>
            <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">empty</span>
          <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOTEMPTY</span>
          <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;may not be empty -- #{dir}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>

      <span class="ruby-identifier">rm_f</span>(<span class="ruby-constant">MANIFEST</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="existfiles-method" class="method-detail ">
        <a name="M000068"></a>

        <div class="method-heading">
        
          <span class="method-name">existfiles</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="existfiles-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 588</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">existfiles</span>
      <span class="ruby-identifier">glob_reject</span>(<span class="ruby-constant">JUNK_FILES</span>, (<span class="ruby-identifier">files_of</span>(<span class="ruby-identifier">curr_srcdir</span>()) <span class="ruby-operator">|</span> <span class="ruby-identifier">files_of</span>(<span class="ruby-value str">'.'</span>)))
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="extconf-method" class="method-detail ">
        <a name="M000026"></a>

        <div class="method-heading">
        
          <span class="method-name">extconf</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="extconf-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 184</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extconf</span>
      <span class="ruby-identifier">ruby</span> <span class="ruby-node">&quot;#{curr_srcdir()}/extconf.rb&quot;</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">extconfopt</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="extdir--method" class="method-detail ">
        <a name="M000135"></a>

        <div class="method-heading">
        
          <span class="method-name">extdir?</span><span
            class="method-args">(dir)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="extdir--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 939</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extdir?</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-node">&quot;#{dir}/MANIFEST&quot;</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-node">&quot;#{dir}/extconf.rb&quot;</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="extensions-method" class="method-detail ">
        <a name="M000009"></a>

        <div class="method-heading">
        
          <span class="method-name">extensions</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Added these for future use in simplificaiton of design.
</p>
          

          
          <div class="method-source-code"
            id="extensions-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 120</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extensions</span>
      <span class="ruby-ivar">@extensions</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Dir</span>[<span class="ruby-value str">'ext/**/extconf.rb'</span>]
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="files-of-method" class="method-detail ">
        <a name="M000136"></a>

        <div class="method-heading">
        
          <span class="method-name">files_of</span><span
            class="method-args">(dir)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="files-of-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 943</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">files_of</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">dir</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-node">&quot;#{dir}/#{ent}&quot;</span>) }
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="force-remove-file-method" class="method-detail ">
        <a name="M000124"></a>

        <div class="method-heading">
        
          <span class="method-name">force_remove_file</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="force-remove-file-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 875</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">force_remove_file</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">path</span>
      <span class="ruby-keyword kw">rescue</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="get-config-method" class="method-detail ">
        <a name="M000141"></a>

        <div class="method-heading">
        
          <span class="method-name">get_config</span><span
            class="method-args">(key)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="get-config-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 972</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_config</span>(<span class="ruby-identifier">key</span>)
      <span class="ruby-identifier">config</span>[<span class="ruby-identifier">key</span>]
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="glob-reject-method" class="method-detail ">
        <a name="M000072"></a>

        <div class="method-heading">
        
          <span class="method-name">glob_reject</span><span
            class="method-args">(pats, ents)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="glob-reject-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 603</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">glob_reject</span>(<span class="ruby-identifier">pats</span>, <span class="ruby-identifier">ents</span>)
      <span class="ruby-identifier">re</span> = <span class="ruby-identifier">globs2re</span>(<span class="ruby-identifier">pats</span>)
      <span class="ruby-identifier">ents</span>.<span class="ruby-identifier">reject</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span> <span class="ruby-identifier">re</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">ent</span> }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="glob-select-method" class="method-detail ">
        <a name="M000071"></a>

        <div class="method-heading">
        
          <span class="method-name">glob_select</span><span
            class="method-args">(pat, ents)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="glob-select-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 598</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">glob_select</span>(<span class="ruby-identifier">pat</span>, <span class="ruby-identifier">ents</span>)
      <span class="ruby-identifier">re</span> = <span class="ruby-identifier">globs2re</span>([<span class="ruby-identifier">pat</span>])
      <span class="ruby-identifier">ents</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span> <span class="ruby-identifier">re</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">ent</span> }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="globs-re-method" class="method-detail ">
        <a name="M000074"></a>

        <div class="method-heading">
        
          <span class="method-name">globs2re</span><span
            class="method-args">(pats)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="globs-re-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 615</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">globs2re</span>(<span class="ruby-identifier">pats</span>)
      <span class="ruby-node">/\A(?:#{
        pats.map {|pat| pat.gsub(/[\.\$\#\*]/) {|ch| GLOB2REGEX[ch] } }.join('|')
      })\z/</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="hookfiles-method" class="method-detail ">
        <a name="M000069"></a>

        <div class="method-heading">
        
          <span class="method-name">hookfiles</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="hookfiles-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 592</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hookfiles</span>
      <span class="ruby-node">%w( pre-%s post-%s pre-%s.rb post-%s.rb )</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">fmt</span><span class="ruby-operator">|</span>
        <span class="ruby-node">%w( etc setup install clean )</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">t</span>) }
      }.<span class="ruby-identifier">flatten</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="inspect-method" class="method-detail ">
        <a name="M000001"></a>

        <div class="method-heading">
        
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="inspect-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 85</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
      <span class="ruby-node">&quot;#&lt;#{self.class} #{File.basename(@srcdir)}&gt;&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-method" class="method-detail ">
        <a name="M000139"></a>

        <div class="method-heading">
        
          <span class="method-name">install</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Install package.
</p>
          

          
          <div class="method-source-code"
            id="install-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 15</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install</span>
      <span class="ruby-identifier">install_bin</span>
      <span class="ruby-identifier">install_lib</span>
      <span class="ruby-identifier">install_data</span>
      <span class="ruby-identifier">install_etc</span>
      <span class="ruby-identifier">install_man</span>
      <span class="ruby-identifier">install_doc</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-method" class="method-detail ">
        <a name="M000127"></a>

        <div class="method-heading">
        
          <span class="method-name">install</span><span
            class="method-args">(from, dest, mode, prefix = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="install-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 887</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">prefix</span> = <span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;install #{from} #{dest}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>

      <span class="ruby-identifier">realdest</span> = <span class="ruby-identifier">prefix</span> <span class="ruby-value">? </span><span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">dest</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">dest</span>
      <span class="ruby-identifier">realdest</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">realdest</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">from</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">realdest</span>)
      <span class="ruby-identifier">str</span> = <span class="ruby-identifier">binread</span>(<span class="ruby-identifier">from</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">diff?</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">realdest</span>)
        <span class="ruby-identifier">verbose_off</span> {
          <span class="ruby-identifier">rm_f</span> <span class="ruby-identifier">realdest</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">realdest</span>)
        }
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">realdest</span>, <span class="ruby-value str">'wb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">str</span>
        }
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">realdest</span>

        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>
          <span class="ruby-identifier">path</span> = <span class="ruby-identifier">realdest</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-identifier">prefix</span>, <span class="ruby-value str">''</span>)
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">path</span> = <span class="ruby-identifier">realdest</span>
        <span class="ruby-keyword kw">end</span>

        <span class="ruby-identifier">record_installation</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-bin-method" class="method-detail ">
        <a name="M000140"></a>

        <div class="method-heading">
        
          <span class="method-name">install_bin</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Install binaries (executables).
</p>
          

          
          <div class="method-source-code"
            id="install-bin-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 25</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_bin</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>(<span class="ruby-value str">'bin'</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">files</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">bindir</span>, <span class="ruby-value">0755</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-data-method" class="method-detail ">
        <a name="M000149"></a>

        <div class="method-heading">
        
          <span class="method-name">install_data</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Install shared data.
</p>
          

          
          <div class="method-source-code"
            id="install-data-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 44</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_data</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>(<span class="ruby-value str">'data'</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">files</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">datadir</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-dir-bin-method" class="method-detail ">
        <a name="M000049"></a>

        <div class="method-heading">
        
          <span class="method-name">install_dir_bin</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="install-dir-bin-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 507</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_dir_bin</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">targetfiles</span>(), <span class="ruby-node">&quot;#{config.bindir}/#{rel}&quot;</span>, <span class="ruby-value">0755</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-dir-data-method" class="method-detail ">
        <a name="M000052"></a>

        <div class="method-heading">
        
          <span class="method-name">install_dir_data</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="install-dir-data-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 521</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_dir_data</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">targetfiles</span>(), <span class="ruby-node">&quot;#{config.datadir}/#{rel}&quot;</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-dir-doc-method" class="method-detail ">
        <a name="M000056"></a>

        <div class="method-heading">
        
          <span class="method-name">install_dir_doc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
doc installs to directory named: &#8220;ruby-#{package}&#8220;
</p>
          

          
          <div class="method-source-code"
            id="install-dir-doc-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 536</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_dir_doc</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">withoutdoc?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">PACKAGE</span>
      <span class="ruby-identifier">dir</span> = <span class="ruby-node">&quot;#{config.docdir}/ruby-#{PACKAGE}/#{rel}&quot;</span> <span class="ruby-comment cmt"># &quot;#{config.docdir}/#{rel}&quot;</span>
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">targetfiles</span>(), <span class="ruby-identifier">dir</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-dir-etc-method" class="method-detail ">
        <a name="M000053"></a>

        <div class="method-heading">
        
          <span class="method-name">install_dir_etc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="install-dir-etc-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 525</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_dir_etc</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-comment cmt"># FIXME: should not remove current config files</span>
      <span class="ruby-comment cmt"># (rename previous file to .old/.org)</span>
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">targetfiles</span>(), <span class="ruby-node">&quot;#{config.sysconfdir}/#{rel}&quot;</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-dir-ext-method" class="method-detail ">
        <a name="M000051"></a>

        <div class="method-heading">
        
          <span class="method-name">install_dir_ext</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="install-dir-ext-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 515</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_dir_ext</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">extdir?</span>(<span class="ruby-identifier">curr_srcdir</span>())
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">rubyextentions</span>(<span class="ruby-value str">'.'</span>),
                    <span class="ruby-node">&quot;#{config.sodir}/#{File.dirname(rel)}&quot;</span>, <span class="ruby-value">0555</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-dir-lib-method" class="method-detail ">
        <a name="M000050"></a>

        <div class="method-heading">
        
          <span class="method-name">install_dir_lib</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="install-dir-lib-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 511</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_dir_lib</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">libfiles</span>(), <span class="ruby-node">&quot;#{config.rbdir}/#{rel}&quot;</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-dir-man-method" class="method-detail ">
        <a name="M000054"></a>

        <div class="method-heading">
        
          <span class="method-name">install_dir_man</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="install-dir-man-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 531</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_dir_man</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">targetfiles</span>(), <span class="ruby-node">&quot;#{config.mandir}/#{rel}&quot;</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-doc-method" class="method-detail ">
        <a name="M000155"></a>

        <div class="method-heading">
        
          <span class="method-name">install_doc</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Install documentation.
</p>
          

          
          <div class="method-source-code"
            id="install-doc-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 62</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_doc</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>(<span class="ruby-value str">'doc'</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">files</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">docdir</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-etc-method" class="method-detail ">
        <a name="M000150"></a>

        <div class="method-heading">
        
          <span class="method-name">install_etc</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Install configuration.
</p>
          

          
          <div class="method-source-code"
            id="install-etc-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 50</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_etc</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>(<span class="ruby-value str">'etc'</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">files</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">sysconfdir</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-ext-method" class="method-detail ">
        <a name="M000142"></a>

        <div class="method-heading">
        
          <span class="method-name">install_ext</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Install shared extension libraries.
</p>
          

          
          <div class="method-source-code"
            id="install-ext-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 31</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_ext</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>(<span class="ruby-value str">'ext'</span>)
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>.<span class="ruby-identifier">select</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">fnmatch?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">f</span>), <span class="ruby-node">&quot;*.#{dllext}&quot;</span>) }
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">files</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">sodir</span>, <span class="ruby-value">0555</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-files-method" class="method-detail ">
        <a name="M000059"></a>

        <div class="method-heading">
        
          <span class="method-name">install_files</span><span
            class="method-args">(list, dest, mode)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="install-files-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 543</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_files</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">mode</span>)
      <span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">install_prefix</span>
      <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fname</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">install</span> <span class="ruby-identifier">fname</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">install_prefix</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-lib-method" class="method-detail ">
        <a name="M000144"></a>

        <div class="method-heading">
        
          <span class="method-name">install_lib</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Install library files.
</p>
          

          
          <div class="method-source-code"
            id="install-lib-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 38</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_lib</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>(<span class="ruby-value str">'lib'</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">files</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">rbdir</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-man-method" class="method-detail ">
        <a name="M000152"></a>

        <div class="method-heading">
        
          <span class="method-name">install_man</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Install manpages.
</p>
          

          
          <div class="method-source-code"
            id="install-man-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 56</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_man</span>
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>(<span class="ruby-value str">'man'</span>)
      <span class="ruby-identifier">install_files</span> <span class="ruby-identifier">files</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">mandir</span>, <span class="ruby-value">0644</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="installation--method" class="method-detail ">
        <a name="M000003"></a>

        <div class="method-heading">
        
          <span class="method-name">installation!</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="installation--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 91</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installation!</span>; <span class="ruby-ivar">@installation</span> = <span class="ruby-keyword kw">true</span>; <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="installation--method" class="method-detail ">
        <a name="M000002"></a>

        <div class="method-heading">
        
          <span class="method-name">installation?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Are we running an installation?
</p>
          

          
          <div class="method-source-code"
            id="installation--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 90</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">installation?</span>; <span class="ruby-ivar">@installation</span>; <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="libfiles-method" class="method-detail ">
        <a name="M000061"></a>

        <div class="method-heading">
        
          <span class="method-name">libfiles</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="libfiles-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 550</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">libfiles</span>
      <span class="ruby-identifier">glob_reject</span>(<span class="ruby-node">%w(*.y *.output)</span>, <span class="ruby-identifier">targetfiles</span>())
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="make-method" class="method-detail ">
        <a name="M000134"></a>

        <div class="method-heading">
        
          <span class="method-name">make</span><span
            class="method-args">(task = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="make-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 935</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make</span>(<span class="ruby-identifier">task</span> = <span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">command</span>(<span class="ruby-operator">*</span>[<span class="ruby-identifier">config</span>.<span class="ruby-identifier">makeprog</span>, <span class="ruby-identifier">task</span>].<span class="ruby-identifier">compact</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="mapdir-method" class="method-detail ">
        <a name="M000065"></a>

        <div class="method-heading">
        
          <span class="method-name">mapdir</span><span
            class="method-args">(ents)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="mapdir-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 570</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mapdir</span>(<span class="ruby-identifier">ents</span>)
      <span class="ruby-identifier">ents</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">ent</span>)
        <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">ent</span>                         <span class="ruby-comment cmt"># objdir</span>
        <span class="ruby-keyword kw">else</span> <span class="ruby-node">&quot;#{curr_srcdir()}/#{ent}&quot;</span>   <span class="ruby-comment cmt"># srcdir</span>
        <span class="ruby-keyword kw">end</span>
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="mkdir-p-method" class="method-detail ">
        <a name="M000103"></a>

        <div class="method-heading">
        
          <span class="method-name">mkdir_p</span><span
            class="method-args">(dirname, prefix = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="mkdir-p-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 796</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">dirname</span>, <span class="ruby-identifier">prefix</span> = <span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">dirname</span> = <span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">dirname</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;mkdir -p #{dirname}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>

      <span class="ruby-comment cmt"># Does not check '/', it's too abnormal.</span>
      <span class="ruby-identifier">dirs</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">dirname</span>).<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">%r&lt;(?=/)&gt;</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A[a-z]:\z/i</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">dirs</span>[<span class="ruby-value">0</span>]
        <span class="ruby-identifier">disk</span> = <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">shift</span>
        <span class="ruby-identifier">dirs</span>[<span class="ruby-value">0</span>] = <span class="ruby-identifier">disk</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirs</span>[<span class="ruby-value">0</span>]
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">idx</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">path</span> = <span class="ruby-identifier">dirs</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">idx</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">''</span>)
        <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">path</span>)
        <span class="ruby-identifier">record_installation</span>(<span class="ruby-identifier">path</span>)  <span class="ruby-comment cmt"># also record directories made</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="move-file-method" class="method-detail ">
        <a name="M000121"></a>

        <div class="method-heading">
        
          <span class="method-name">move_file</span><span
            class="method-args">(src, dest)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="move-file-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 862</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">move_file</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
      <span class="ruby-identifier">force_remove_file</span> <span class="ruby-identifier">dest</span>
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>
      <span class="ruby-keyword kw">rescue</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-value str">'wb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">binread</span>(<span class="ruby-identifier">src</span>)
        }
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">src</span>).<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">dest</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">src</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="new-shebang-method" class="method-detail ">
        <a name="M000037"></a>

        <div class="method-heading">
        
          <span class="method-name">new_shebang</span><span
            class="method-args">(old)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="new-shebang-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 249</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_shebang</span>(<span class="ruby-identifier">old</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\Aruby/</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">old</span>.<span class="ruby-identifier">cmd</span>)
        <span class="ruby-constant">Shebang</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span>.<span class="ruby-identifier">rubypath</span>, <span class="ruby-identifier">old</span>.<span class="ruby-identifier">args</span>)
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">old</span>.<span class="ruby-identifier">cmd</span>) <span class="ruby-operator">==</span> <span class="ruby-value str">'env'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">old</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'ruby'</span>
        <span class="ruby-constant">Shebang</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span>.<span class="ruby-identifier">rubypath</span>, <span class="ruby-identifier">old</span>.<span class="ruby-identifier">args</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>])
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">old</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">shebang</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'all'</span>
        <span class="ruby-constant">Shebang</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span>.<span class="ruby-identifier">rubypath</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="no-harm--method" class="method-detail ">
        <a name="M000004"></a>

        <div class="method-heading">
        
          <span class="method-name">no_harm?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="no-harm--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 93</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">no_harm?</span> ; <span class="ruby-ivar">@no_harm</span> ; <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="noop-method" class="method-detail ">
        <a name="M000011"></a>

        <div class="method-heading">
        
          <span class="method-name">noop</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="noop-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 129</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">noop</span>(<span class="ruby-identifier">rel</span>); <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Installer.html#M000019">config_dir_bin</a>, <a href="Installer.html#M000020">config_dir_lib</a>, <a href="Installer.html#M000022">config_dir_data</a>, <a href="Installer.html#M000023">config_dir_etc</a>, <a href="Installer.html#M000024">config_dir_man</a>, <a href="Installer.html#M000025">config_dir_doc</a>, <a href="Installer.html#M000030">setup_dir_lib</a>, <a href="Installer.html#M000032">setup_dir_data</a>, <a href="Installer.html#M000033">setup_dir_etc</a>, <a href="Installer.html#M000034">setup_dir_man</a>, <a href="Installer.html#M000035">setup_dir_doc</a>, <a href="Installer.html#M000079">clean_dir_bin</a>, <a href="Installer.html#M000080">clean_dir_lib</a>, <a href="Installer.html#M000081">clean_dir_data</a>, <a href="Installer.html#M000082">clean_dir_etc</a>, <a href="Installer.html#M000083">clean_dir_man</a>, <a href="Installer.html#M000084">clean_dir_doc</a>, <a href="Installer.html#M000087">distclean_dir_bin</a>, <a href="Installer.html#M000088">distclean_dir_lib</a>, <a href="Installer.html#M000090">distclean_dir_data</a>, <a href="Installer.html#M000091">distclean_dir_etc</a>, <a href="Installer.html#M000092">distclean_dir_man</a>
        </div>
        
      </div>

    
      <div id="objdir-root-method" class="method-detail ">
        <a name="M000013"></a>

        <div class="method-heading">
        
          <span class="method-name">objdir_root</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="objdir-root-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 139</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">objdir_root</span>
      <span class="ruby-ivar">@objdir</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="open-atomic-writer-method" class="method-detail ">
        <a name="M000039"></a>

        <div class="method-heading">
        
          <span class="method-name">open_atomic_writer</span><span
            class="method-args">(path, &block)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="open-atomic-writer-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 260</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open_atomic_writer</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
      <span class="ruby-identifier">tmpfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">path</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'.tmp'</span>
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">tmpfile</span>, <span class="ruby-value str">'wb'</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">tmpfile</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">ensure</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">tmpfile</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">tmpfile</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="quiet--method" class="method-detail ">
        <a name="M000006"></a>

        <div class="method-heading">
        
          <span class="method-name">quiet?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="quiet--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 95</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quiet?</span>   ; <span class="ruby-ivar">@quiet</span>   ; <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="record-installation-method" class="method-detail ">
        <a name="M000130"></a>

        <div class="method-heading">
        
          <span class="method-name">record_installation</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="record-installation-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 913</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">record_installation</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-node">&quot;#{objdir_root()}/#{MANIFEST}&quot;</span>))
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{objdir_root()}/#{MANIFEST}&quot;</span>, <span class="ruby-value str">'a'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="relpath-method" class="method-detail ">
        <a name="M000014"></a>

        <div class="method-heading">
        
          <span class="method-name">relpath</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="relpath-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 143</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relpath</span>
      <span class="ruby-ivar">@currdir</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="remove-file-method" class="method-detail ">
        <a name="M000126"></a>

        <div class="method-heading">
        
          <span class="method-name">remove_file</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="remove-file-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 882</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_file</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0777</span>, <span class="ruby-identifier">path</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">path</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="remove-tree-method" class="method-detail ">
        <a name="M000116"></a>

        <div class="method-heading">
        
          <span class="method-name">remove_tree</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="remove-tree-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 832</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_tree</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink?</span>(<span class="ruby-identifier">path</span>)
        <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">path</span>
      <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">path</span>)
        <span class="ruby-identifier">remove_tree0</span> <span class="ruby-identifier">path</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">force_remove_file</span> <span class="ruby-identifier">path</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="remove-tree--method" class="method-detail ">
        <a name="M000118"></a>

        <div class="method-heading">
        
          <span class="method-name">remove_tree0</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="remove-tree--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 842</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_tree0</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ent</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'.'</span>
        <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ent</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'..'</span>
        <span class="ruby-identifier">entpath</span> = <span class="ruby-node">&quot;#{path}/#{ent}&quot;</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink?</span>(<span class="ruby-identifier">entpath</span>)
          <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">entpath</span>
        <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">entpath</span>)
          <span class="ruby-identifier">remove_tree0</span> <span class="ruby-identifier">entpath</span>
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">force_remove_file</span> <span class="ruby-identifier">entpath</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-identifier">path</span>
      <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOTEMPTY</span>
        <span class="ruby-comment cmt"># directory may not be empty</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="report-header-method" class="method-detail ">
        <a name="M000008"></a>

        <div class="method-heading">
        
          <span class="method-name">report_header</span><span
            class="method-args">(phase)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="report-header-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 107</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">report_header</span>(<span class="ruby-identifier">phase</span>)
       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">quiet?</span>
       <span class="ruby-comment cmt">#center = &quot;            &quot;</span>
       <span class="ruby-comment cmt">#c = (center.size - phase.size) / 2</span>
       <span class="ruby-comment cmt">#center[c,phase.size] = phase.to_s.upcase</span>
       <span class="ruby-identifier">line</span> = <span class="ruby-value str">'- '</span> <span class="ruby-operator">*</span> <span class="ruby-value">4</span> <span class="ruby-operator">+</span> <span class="ruby-value str">' -'</span> <span class="ruby-operator">*</span> <span class="ruby-value">24</span>
       <span class="ruby-comment cmt">#c = (line.size - phase.size) / 2</span>
       <span class="ruby-identifier">line</span>[<span class="ruby-value">5</span>,<span class="ruby-identifier">phase</span>.<span class="ruby-identifier">size</span>] = <span class="ruby-node">&quot; #{phase.to_s.upcase} &quot;</span>
       <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n\n&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="rm-f-method" class="method-detail ">
        <a name="M000110"></a>

        <div class="method-heading">
        
          <span class="method-name">rm_f</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="rm-f-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 814</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_f</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;rm -f #{path}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>
      <span class="ruby-identifier">force_remove_file</span> <span class="ruby-identifier">path</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="rm-rf-method" class="method-detail ">
        <a name="M000111"></a>

        <div class="method-heading">
        
          <span class="method-name">rm_rf</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="rm-rf-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 820</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;rm -rf #{path}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>
      <span class="ruby-identifier">remove_tree</span> <span class="ruby-identifier">path</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="rmdir-method" class="method-detail ">
        <a name="M000113"></a>

        <div class="method-heading">
        
          <span class="method-name">rmdir</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="rmdir-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 826</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;rmdir #{path}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-identifier">path</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="ruby-method" class="method-detail ">
        <a name="M000133"></a>

        <div class="method-heading">
        
          <span class="method-name">ruby</span><span
            class="method-args">(*args)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="ruby-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 931</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ruby</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
      <span class="ruby-identifier">command</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">rubyprog</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="rubyextentions-method" class="method-detail ">
        <a name="M000062"></a>

        <div class="method-heading">
        
          <span class="method-name">rubyextentions</span><span
            class="method-args">(dir)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="rubyextentions-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 554</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rubyextentions</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-identifier">ents</span> = <span class="ruby-identifier">glob_select</span>(<span class="ruby-node">&quot;*.#{dllext}&quot;</span>, <span class="ruby-identifier">targetfiles</span>())
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ents</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">setup_rb_error</span> <span class="ruby-node">&quot;no ruby extention exists: 'ruby #{$0} setup' first&quot;</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">ents</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="run-hook-method" class="method-detail ">
        <a name="M000099"></a>

        <div class="method-heading">
        
          <span class="method-name">run_hook</span><span
            class="method-args">(id)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="run-hook-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 773</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">run_hook</span>(<span class="ruby-identifier">id</span>)
      <span class="ruby-identifier">path</span> = [ <span class="ruby-node">&quot;#{curr_srcdir()}/#{id}&quot;</span>,
               <span class="ruby-node">&quot;#{curr_srcdir()}/#{id}.rb&quot;</span> ].<span class="ruby-identifier">detect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">cand</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">cand</span>) }
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">path</span>
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-identifier">instance_eval</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">path</span>), <span class="ruby-identifier">path</span>, <span class="ruby-value">1</span>
      <span class="ruby-keyword kw">rescue</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG</span>
        <span class="ruby-identifier">setup_rb_error</span> <span class="ruby-node">&quot;hook #{path} failed:\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">$!</span>.<span class="ruby-identifier">message</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="set-config-method" class="method-detail ">
        <a name="M000143"></a>

        <div class="method-heading">
        
          <span class="method-name">set_config</span><span
            class="method-args">(key, val)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
obsolete: use metaconfig to change configuration TODO: what to do with?
</p>
          

          
          <div class="method-source-code"
            id="set-config-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 978</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_config</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">val</span>)
      <span class="ruby-identifier">config</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">val</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="setup-dir-bin-method" class="method-detail ">
        <a name="M000029"></a>

        <div class="method-heading">
        
          <span class="method-name">setup_dir_bin</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="setup-dir-bin-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 206</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_dir_bin</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-identifier">files_of</span>(<span class="ruby-identifier">curr_srcdir</span>()).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fname</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">update_shebang_line</span> <span class="ruby-node">&quot;#{curr_srcdir()}/#{fname}&quot;</span>  <span class="ruby-comment cmt"># MOVE TO INSTALL (BUT HOW?)</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="setup-dir-data-method" class="method-detail method-alias">
        <a name="M000032"></a>

        <div class="method-heading">
        
          <span class="method-name">setup_dir_data</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="setup-dir-doc-method" class="method-detail method-alias">
        <a name="M000035"></a>

        <div class="method-heading">
        
          <span class="method-name">setup_dir_doc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="setup-dir-etc-method" class="method-detail method-alias">
        <a name="M000033"></a>

        <div class="method-heading">
        
          <span class="method-name">setup_dir_etc</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="setup-dir-ext-method" class="method-detail ">
        <a name="M000031"></a>

        <div class="method-heading">
        
          <span class="method-name">setup_dir_ext</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="setup-dir-ext-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 214</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_dir_ext</span>(<span class="ruby-identifier">rel</span>)
      <span class="ruby-identifier">make</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">extdir?</span>(<span class="ruby-identifier">curr_srcdir</span>())
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="setup-dir-lib-method" class="method-detail method-alias">
        <a name="M000030"></a>

        <div class="method-heading">
        
          <span class="method-name">setup_dir_lib</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="setup-dir-man-method" class="method-detail method-alias">
        <a name="M000034"></a>

        <div class="method-heading">
        
          <span class="method-name">setup_dir_man</span><span
            class="method-args">(rel)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Alias for <a href="Installer.html#M000011">noop</a>
</p>
          

          
        </div>

        
      </div>

    
      <div id="srcdir-root-method" class="method-detail ">
        <a name="M000012"></a>

        <div class="method-heading">
        
          <span class="method-name">srcdir_root</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Hook Script API bases
</p>
          

          
          <div class="method-source-code"
            id="srcdir-root-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 135</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">srcdir_root</span>
      <span class="ruby-ivar">@srcdir</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="srcdirectories-method" class="method-detail ">
        <a name="M000158"></a>

        <div class="method-heading">
        
          <span class="method-name">srcdirectories</span><span
            class="method-args">(path = '.')</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="srcdirectories-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 1024</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">srcdirectories</span>(<span class="ruby-identifier">path</span> = <span class="ruby-value str">'.'</span>)
      <span class="ruby-identifier">srcentries</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">fname</span><span class="ruby-operator">|</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">curr_srcdir</span>(), <span class="ruby-identifier">path</span>, <span class="ruby-identifier">fname</span>))
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="srcdirectory--method" class="method-detail ">
        <a name="M000151"></a>

        <div class="method-heading">
        
          <span class="method-name">srcdirectory?</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="srcdirectory--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 1004</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">srcdirectory?</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">srcfile</span>(<span class="ruby-identifier">path</span>))
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="srcentries-method" class="method-detail ">
        <a name="M000154"></a>

        <div class="method-heading">
        
          <span class="method-name">srcentries</span><span
            class="method-args">(path = '.')</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="srcentries-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 1012</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">srcentries</span>(<span class="ruby-identifier">path</span> = <span class="ruby-value str">'.'</span>)
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{curr_srcdir()}/#{path}&quot;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-operator">-</span> <span class="ruby-node">%w(. ..)</span>
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="srcexist--method" class="method-detail ">
        <a name="M000148"></a>

        <div class="method-heading">
        
          <span class="method-name">srcexist?</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="srcexist--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 1000</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">srcexist?</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">srcfile</span>(<span class="ruby-identifier">path</span>))
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="srcfile-method" class="method-detail ">
        <a name="M000147"></a>

        <div class="method-heading">
        
          <span class="method-name">srcfile</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="srcfile-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 996</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">srcfile</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-node">&quot;#{curr_srcdir()}/#{path}&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="srcfile--method" class="method-detail ">
        <a name="M000153"></a>

        <div class="method-heading">
        
          <span class="method-name">srcfile?</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="srcfile--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 1008</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">srcfile?</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">srcfile</span>(<span class="ruby-identifier">path</span>))
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="srcfiles-method" class="method-detail ">
        <a name="M000156"></a>

        <div class="method-heading">
        
          <span class="method-name">srcfiles</span><span
            class="method-args">(path = '.')</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="srcfiles-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 1018</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">srcfiles</span>(<span class="ruby-identifier">path</span> = <span class="ruby-value str">'.'</span>)
      <span class="ruby-identifier">srcentries</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">fname</span><span class="ruby-operator">|</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">curr_srcdir</span>(), <span class="ruby-identifier">path</span>, <span class="ruby-identifier">fname</span>))
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="targetfiles-method" class="method-detail ">
        <a name="M000064"></a>

        <div class="method-heading">
        
          <span class="method-name">targetfiles</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="targetfiles-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 566</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">targetfiles</span>
      <span class="ruby-identifier">mapdir</span>(<span class="ruby-identifier">existfiles</span>() <span class="ruby-operator">-</span> <span class="ruby-identifier">hookfiles</span>())
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="traverse-method" class="method-detail ">
        <a name="M000095"></a>

        <div class="method-heading">
        
          <span class="method-name">traverse</span><span
            class="method-args">(task, rel, mid, clip=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="traverse-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 740</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">traverse</span>(<span class="ruby-identifier">task</span>, <span class="ruby-identifier">rel</span>, <span class="ruby-identifier">mid</span>, <span class="ruby-identifier">clip</span>=<span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">dive_into</span>(<span class="ruby-identifier">rel</span>) {
        <span class="ruby-identifier">run_hook</span> <span class="ruby-node">&quot;pre-#{task}&quot;</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">clip</span>
          <span class="ruby-identifier">rel2</span> = <span class="ruby-identifier">rel</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-node">/\A#{Regexp.escape(clip)}/</span>,<span class="ruby-value str">''</span>)
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">rel2</span> = <span class="ruby-identifier">rel</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">%r[\A.*?(?:/|\z)]</span>, <span class="ruby-value str">''</span>)  <span class="ruby-comment cmt"># trans: this clips off 'lib/'. Why so complex?</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">__send__</span> <span class="ruby-identifier">mid</span>, <span class="ruby-identifier">rel2</span>
        <span class="ruby-identifier">directories_of</span>(<span class="ruby-identifier">curr_srcdir</span>()).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">traverse</span> <span class="ruby-identifier">task</span>, <span class="ruby-node">&quot;#{rel}/#{d}&quot;</span>, <span class="ruby-identifier">mid</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">run_hook</span> <span class="ruby-node">&quot;post-#{task}&quot;</span>
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="update-shebang-line-method" class="method-detail ">
        <a name="M000036"></a>

        <div class="method-heading">
        
          <span class="method-name">update_shebang_line</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="update-shebang-line-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 223</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_shebang_line</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">no_harm?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">shebang</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'never'</span>
      <span class="ruby-identifier">old</span> = <span class="ruby-constant">Shebang</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old</span>.<span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
          <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;warning: #{path}&quot;</span>
          <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Shebang line has too many args.&quot;</span>
          <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;It is not portable and your program may not work.&quot;</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">new</span> = <span class="ruby-identifier">new_shebang</span>(<span class="ruby-identifier">old</span>)
        <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">old</span>.<span class="ruby-identifier">to_s</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">shebang</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'all'</span>
        <span class="ruby-identifier">new</span> = <span class="ruby-constant">Shebang</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span>.<span class="ruby-identifier">rubypath</span>)
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;updating shebang: #{File.basename(path)}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-identifier">open_atomic_writer</span>(<span class="ruby-identifier">path</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">output</span><span class="ruby-operator">|</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value str">'rb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gets</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">old</span>   <span class="ruby-comment cmt"># discard</span>
          <span class="ruby-identifier">output</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_s</span>
          <span class="ruby-identifier">output</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span>
        }
      }
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="verbose--method" class="method-detail ">
        <a name="M000005"></a>

        <div class="method-heading">
        
          <span class="method-name">verbose?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="verbose--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 94</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verbose?</span> ; <span class="ruby-ivar">@verbose</span> ; <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="verbose-off-method" class="method-detail ">
        <a name="M000007"></a>

        <div class="method-heading">
        
          <span class="method-name">verbose_off</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p class="missing-docs">(Not documented)</p>
          

          
          <div class="method-source-code"
            id="verbose-off-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install.rb, line 97</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verbose_off</span> <span class="ruby-comment cmt">#:yield:</span>
      <span class="ruby-keyword kw">begin</span>
        <span class="ruby-identifier">save</span>, <span class="ruby-ivar">@verbose</span> = <span class="ruby-identifier">verbose?</span>, <span class="ruby-keyword kw">false</span>
        <span class="ruby-keyword kw">yield</span>
      <span class="ruby-keyword kw">ensure</span>
        <span class="ruby-ivar">@verbose</span> = <span class="ruby-identifier">save</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  
    <div id="private-instance-method-details" class="method-section section">
      <h3 class="section-header">Private Instance Methods</h3>

    
      <div id="diff--method" class="method-detail ">
        <a name="M000163"></a>

        <div class="method-heading">
        
          <span class="method-name">diff?</span><span
            class="method-args">(new_content, path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="diff--source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 138</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">diff?</span>(<span class="ruby-identifier">new_content</span>, <span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-identifier">new_content</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">binread</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="dllext-method" class="method-detail ">
        <a name="M000165"></a>

        <div class="method-heading">
        
          <span class="method-name">dllext</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="dllext-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 153</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dllext</span>
      <span class="ruby-constant">ConfigTable</span><span class="ruby-operator">::</span><span class="ruby-constant">RBCONFIG</span>[<span class="ruby-value str">'DLEXT'</span>]
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="files-method" class="method-detail ">
        <a name="M000157"></a>

        <div class="method-heading">
        
          <span class="method-name">files</span><span
            class="method-args">(dir)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="files-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 70</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">files</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-identifier">files</span> = <span class="ruby-constant">Dir</span>[<span class="ruby-node">&quot;#{dir}/**/*&quot;</span>]
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>.<span class="ruby-identifier">select</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">f</span>) }
      <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-node">&quot;#{dir}/&quot;</span>, <span class="ruby-value str">''</span>) }
      <span class="ruby-identifier">files</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-method" class="method-detail ">
        <a name="M000160"></a>

        <div class="method-heading">
        
          <span class="method-name">install</span><span
            class="method-args">(from, dest, mode, prefix = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="install-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 86</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">prefix</span> = <span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;install #{from} #{dest}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dryrun?</span>

      <span class="ruby-identifier">realdest</span> = <span class="ruby-identifier">prefix</span> <span class="ruby-value">? </span><span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">dest</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">dest</span>
      <span class="ruby-identifier">realdest</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">realdest</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">from</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">realdest</span>)
      <span class="ruby-identifier">str</span> = <span class="ruby-identifier">binread</span>(<span class="ruby-identifier">from</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">diff?</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">realdest</span>)
        <span class="ruby-identifier">verbose_off</span> {
          <span class="ruby-identifier">rm_f</span> <span class="ruby-identifier">realdest</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">realdest</span>)
        }
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">realdest</span>, <span class="ruby-value str">'wb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">str</span>
        }
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">realdest</span>
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>
          <span class="ruby-identifier">path</span> = <span class="ruby-identifier">realdest</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-identifier">prefix</span>, <span class="ruby-value str">''</span>)
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">path</span> = <span class="ruby-identifier">realdest</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">record_installation</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="install-files-method" class="method-detail ">
        <a name="M000159"></a>

        <div class="method-heading">
        
          <span class="method-name">install_files</span><span
            class="method-args">(list, dest, mode)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="install-files-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 78</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_files</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">mode</span>)
      <span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">install_prefix</span>
      <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fname</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">install</span> <span class="ruby-identifier">fname</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">install_prefix</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="mkdir-p-method" class="method-detail ">
        <a name="M000161"></a>

        <div class="method-heading">
        
          <span class="method-name">mkdir_p</span><span
            class="method-args">(dirname, prefix=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
TODO: Surely this can be simplified.
</p>
          

          
          <div class="method-source-code"
            id="mkdir-p-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 111</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">dirname</span>, <span class="ruby-identifier">prefix</span>=<span class="ruby-keyword kw">nil</span>)
      <span class="ruby-identifier">dirname</span> = <span class="ruby-identifier">prefix</span> <span class="ruby-operator">+</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">dirname</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>
      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;mkdir -p #{dirname}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dryrun?</span>

      <span class="ruby-comment cmt"># Does not check '/', it's too abnormal.</span>
      <span class="ruby-identifier">dirs</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">dirname</span>).<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">%r&lt;(?=/)&gt;</span>)
      <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A[a-z]:\z/i</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">dirs</span>[<span class="ruby-value">0</span>]
        <span class="ruby-identifier">disk</span> = <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">shift</span>
        <span class="ruby-identifier">dirs</span>[<span class="ruby-value">0</span>] = <span class="ruby-identifier">disk</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirs</span>[<span class="ruby-value">0</span>]
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">idx</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">path</span> = <span class="ruby-identifier">dirs</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">idx</span>].<span class="ruby-identifier">join</span>(<span class="ruby-value str">''</span>)
        <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dir?</span>(<span class="ruby-identifier">path</span>)
        <span class="ruby-identifier">record_installation</span>(<span class="ruby-identifier">path</span>)  <span class="ruby-comment cmt"># also record directories made</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="record-installation-method" class="method-detail ">
        <a name="M000162"></a>

        <div class="method-heading">
        
          <span class="method-name">record_installation</span><span
            class="method-args">(path)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="record-installation-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 130</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">record_installation</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-node">&quot;#{objdir_root()}/#{MANIFEST}&quot;</span>))
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{objdir_root()}/#{MANIFEST}&quot;</span>, <span class="ruby-value str">'a'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">path</span>)
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="rubyextentions-method" class="method-detail ">
        <a name="M000164"></a>

        <div class="method-heading">
        
          <span class="method-name">rubyextentions</span><span
            class="method-args">(dir)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="rubyextentions-source">
<pre>
<span class="ruby-comment cmt"># File lib/setup/install2.rb, line 144</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rubyextentions</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-identifier">ents</span> = <span class="ruby-identifier">glob_select</span>(<span class="ruby-node">&quot;*.#{dllext}&quot;</span>, <span class="ruby-identifier">targetfiles</span>())
      <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ents</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">setup_rb_error</span> <span class="ruby-node">&quot;no ruby extention exists: 'ruby #{$0} setup' first&quot;</span>
      <span class="ruby-keyword kw">end</span>
      <span class="ruby-identifier">ents</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  

  </div>


  <div id="rdoc-debugging-section-dump" class="debugging-section">
  
    <p>Disabled; run with --debug to generate this.</p>
  
  </div>

</body>
</html>
